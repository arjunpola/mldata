{% extends "repository/base.html" %}
{% load i18n %}
{% load markup %}

{% block title %}{% trans "Repository" %} :: {% trans "Data" %} :: {{ object.name }}{% endblock %}
{% block billboard %}{% trans "Repository" %} :: {% trans "Data" %} :: {% trans "View" %}{% endblock %}
{% block extrahead %}
<script type="text/javascript" src="/media/js/jquery/jquery.js"></script>
<script type="text/javascript">
$(function() {
	$('#delete').click(function() {
		if (confirm('{% trans "Do you really want to delete this item?" %}')) {
			return true;
		} else {
			return false;
		}
	});
});
</script>
{% endblock %}

{% block content %}
<table class="plain">
<tr>
	<td width="75%"><h1>{% trans "Data of" %} {{ object.name }} ({% if object.is_public %}{% trans "public" %}{% else %}{% trans "private" %}{% endif %})</h1></td>
	<td class="rating">{% include "repository/rating_results.html" %}</td>
</tr>
<tr>
	<td colspan="2">{% trans "Completeness of this Data item currently" %}: {{ object.completeness }}%.<br />{% trans "You can" %} <a href="{% url repository.views.data_edit object.id %}">{% trans "edit this item" %}</a> {% trans "to add more meta information and make better use of the site's automatisms" %}.</td>
</tr>
</table>

<table class="widget">
<tr>
	<th class="tab" colspan="2">
		{% ifequal request.path url_main %}
			<span style="font-size:large">{% trans "Main" %}</span>
		{% else %}
			<a id="main" class="tab" title="{% trans "Primary attributes of Data item + download" %}" href="{{ url_main }}">{% trans "Main" %}</a>
		{% endifequal %}
		{% ifequal request.path url_data %}
			<span style="font-size:large">{% trans "Data" %}</span>
		{% else %}
			<a id="data" class="tab" title="{% trans "Extracted/parsed/visualised data from the file" %}" href="{{ url_data }}">{% trans "Data" %}</a>
		{% endifequal %}
		{% ifequal request.path url_other %}
			<span style="font-size:large">{% trans "Other" %}</span>
		{% else %}
			<a id="other" class="tab" title="{% trans "Other attributes of Data item" %}" href="{{ url_other }}">{% trans "Other" %}</a></th>
		{% endifequal %}
</tr>
<tr>
	<th>{% trans "on" %} {{ object.pub_date|date:"Y-m-d H:i" }} {% trans "by" %} {{ object.user.username }}, {% trans "version" %} {{ object.version }} /
	{% if object.versions.has_previous %}<a href="?page={{ object.versions.previous_page_number }}">&laquo;</a>{% endif %}
	{% for v in object.versions.object_list %}
		{% ifequal object.version v.version %}-{% else %}<a href="{{ request.path }}../{{ v.id }}">{{ v.version }}</a>{% endifequal %}
	{% endfor %}
	{% if object.versions.has_next %}<a href="?page={{ object.versions.next_page_number }}">&raquo;</a>{% endif %}
	</th>
	<th style="text-align: right">
		{% if can_activate %}<a href="{% url repository.views.data_activate object.id %}" title="{% trans "Make this version current and public" %}">{% trans "ACTIVATE" %}</a>{% endif %}
		<a href="{% url repository.views.data_edit object.slug_or_id %}" title="{% trans "Edit this version to create a new current one" %}">{% trans "EDIT" %}</a>
		{% if can_delete %}<a id="delete" href="{% url repository.views.data_delete object.slug_or_id %}" title="{% trans "Delete this version" %}">{% trans "DELETE" %}</a>{% endif %}
	</th>
</tr>
{% block data_content %}{% endblock %}
</table>

{% include "repository/rating_form.html" %}

{% load comments %}
{% get_comment_list for repository.data object.id as comment_list %}
{% get_comment_form for repository.data object.id as form %}
{% include "comments.html" %}

{% endblock %}

