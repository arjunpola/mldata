{% extends "repository/base.html" %}
{% load i18n %}
{% block extrahead %}
{% if searchterm %}
<script type="text/javascript" src="/media/js/jquery/jquery-ui.min.js"></script>
<script type="text/javascript">
	$(function() {
		$('#tabs').tabs();
		{% if data_list %}
			$('#data-nav-right').show();
			$('#task-nav-right').hide();
			$('#solution-nav-right').hide();
			$('#challenge-nav-right').hide();
		{% else %}
			{% if task_list %}
				$('#task-nav-right').show();
				$('#solution-nav-right').hide();
				$('#challenge-nav-right').hide();
			{% else %}
				{% if solution_list %}
				$('#solution-nav-right').show();
				$('#challenge-nav-right').hide();
				{% endif %}
			{% endif %}
		{% endif %}

		$('#tabs').bind('tabsselect', function(event, ui) {
			if (/data$/.test(ui.tab))
			{
				$('#data-nav-right').show();
				$('#task-nav-right').hide();
				$('#solution-nav-right').hide();
				$('#challenge-nav-right').hide();
			}
			else if (/task$/.test(ui.tab))
			{
				$('#data-nav-right').hide();
				$('#task-nav-right').show();
				$('#solution-nav-right').hide();
				$('#challenge-nav-right').hide();
			}
			else if (/solution$/.test(ui.tab))
			{
				$('#data-nav-right').hide();
				$('#task-nav-right').hide();
				$('#solution-nav-right').show();
				$('#challenge-nav-right').hide();
			}
			else if (/challenge$/.test(ui.tab))
			{
				$('#data-nav-right').hide();
				$('#task-nav-right').hide();
				$('#solution-nav-right').hide();
				$('#challenge-nav-right').show();
			}
			});
	});
</script>
{% endif %}
{% endblock %}

{% block title %}{% trans "Repository" %} :: {{ klass }} :: {{ my_or_archive }}{% endblock %}

{% block breadcrumbs %}<a href="{% url repository_index %}">{% trans "Repository" %}</a> / <a href="
{% if data_list %}{% url data_index %}{% endif %}
{% if task_list %}{% url task_index %}{% endif %}
{% if solution_list %}{% url solution_index %}{% endif %}
{% if challenge_list %}{% url challenge_index %}{% endif %}
">{% trans klass %}</a> / {{ my_or_archive }}{% endblock %}

{% block content %}
<h2 class="title-01">{{ my_or_archive }} {{ klass }}</h2>
<div class="in">
{% if searchterm %}
    <div id="tabs">
        <ul class="clearfix">
{% if data_list %}
<li><a title="{% trans "Data" %}" href="#tabs-data">{% trans "Data" %} ({{ data.object_list|length }})</a></li>
{% endif %}
{% if task_list %}
            <li><a title="{% trans "Task" %}" href="#tabs-task">{% trans "Task" %} ({{ task.object_list|length }})</a></li>
{% endif %}
{% if solution_list %}
            <li><a title="{% trans "Solution" %}" href="#tabs-solution">{% trans "Solution" %} ({{ solution.object_list|length }})</a></li>
{% endif %}
{% if challenge_list %}
            <li><a title="{% trans "Challenge" %}" href="#tabs-challenge">{% trans "Challenge" %} ({{ challenge.object_list|length }})</a></li>
{% endif %}
        </ul>
{% endif %}

{% if data_list %}
<div id="tabs-data">
{% if data_searcherror %}
<div class="error">{% trans "Your search did not yield any results." %}</div>
{% else %}
	{% with data_list as object_list %}
	{% include "repository/item_index_common.html" %}
	{% endwith %}

	{% if unapproved %}
		<br /><hr />
		<h2>{% trans "My Unapproved" %} {{ klass }}</h2>
		{% with unapproved as object_list %}
		{% include "repository/item_index_common.html" %}
		{% endwith %}
	{% endif %}
{% endif%}
</div>
{% endif %}

{% if task_list %}
<div id="tabs-task">
{% if task_searcherror %}
<div class="error">{% trans "Your search did not yield any results." %}</div>
{% else %}
	{% with task_list as object_list %}
	{% include "repository/item_index_common.html" %}
	{% endwith %}

	{% if unapproved %}
		<br /><hr />
		<h2>{% trans "My Unapproved" %} {{ klass }}</h2>
		{% with unapproved as object_list %}
		{% include "repository/item_index_common.html" %}
		{% endwith %}
	{% endif %}
{% endif%}
</div>
{% endif %}

{% if solution_list %}
<div id="tabs-solution">
{% if solution_searcherror %}
<div class="error">{% trans "Your search did not yield any results." %}</div>
{% else %}
	{% with solution_list as object_list %}
	{% include "repository/item_index_common.html" %}
	{% endwith %}

	{% if unapproved %}
		<br /><hr />
		<h2>{% trans "My Unapproved" %} {{ klass }}</h2>
		{% with unapproved as object_list %}
			{% include "repository/item_index_common.html" %}
		{% endwith %}
	{% endif %}
{% endif%}
</div>
{% endif %}

{% if challenge_list %}
<div id="tabs-challenge">
{% if challenge_searcherror %}
<div class="error">{% trans "Your search did not yield any results." %}</div>
{% else %}
	{% with challenge_list as object_list %}
	{% include "repository/item_index_common.html" %}
	{% endwith %}

	{% if unapproved %}
		<br /><hr />
		<h2>{% trans "My Unapproved" %} {{ klass }}</h2>
		{% with unapproved as object_list %}
			{% include "repository/item_index_common.html" %}
		{% endwith %}
	{% endif %}
{% endif%}
</div>
{% endif %}

{% if searchterm %}
</div><!-- /tabs -->
{% endif %}
</div><!-- /in -->
{% endblock %}
